<html>
<head>
<title>YA Perl Advent Calendar 2005: Conjunction Junction</title>
<link rel="stylesheet" href="../style.css" type="text/css" /></head>
<body>
<h1><a href="../">YA Perl Advent Calendar</a> 2005-12-11</h1>
There's at least one thing to look forward to in Perl 6,
<a href="http://www.perl.com/pub/a/2003/07/29/exegesis6.html?page=4">junctions</a>.
Junctions provide a simple interface for set-like operations, typically with
the functions <tt>all</tt>, <tt>any</tt>, <tt>none</tt>, and <tt>one</tt>. For
some time now we've had this functionality available to us in Perl 5 thanks to
the Mad Aussie's
<a href="http://search.cpan.org/search?module=Quantum::Superpositions">Quantum::Superpositions</a>;
in fact it was featured on the advent calendar way back in
<a href="http://perladvent.org/2001/24th/">2001</a>. Alas, this wonderful tool
came with a very hefty performance hit. In my first use of the module, I ended
up switching to a grep and gaining a ten+fold increase in speed.
<p />
Enter <a href="http://search.cpan.org/search?module=Perl6::Junction">Perl6::Junction</a>,
note the lack of plural&mdash;I doubt I'm the only one who'll find themselves
repeatedly typing Perl6::Junction<em>s</em>. Junction might be thought of as
Superpositions Lite: it lacks several features but is significantly faster
<sup style="font-size: smaller"><a href="#1">1</a></sup>. In a recent
<a href="http://www.opensubscriber.com/message/boston-pm@mail.pm.org/2438101.html">thread</a>
on Boston.PM we determined that Junctions is about 50x faster than Quantum
<sup style="font-size: smaller"><a href="#2">2</a></sup>
<pre class="c">
ANY:  
      s/iter    QS    P6       <= Note this is s/iter instead of Rate (iter/s)
QS      1.20    --  -98%          Rate ~ 0.83/s
P6 2.10e-002 5611%    --          Rate ~ 47.6/s

ALL:  
     Rate    QS    P6  
QS 1.46/s    --  -98%  
P6 79.2/s 5337%    --  
</pre>

One of the notably missing features of Perl::Junction 1.1 is that it neither
exports by default nor does it provides an :all tag. It also lacks
stringification, or the ability to view <tt>eigenstates</tt>.
<p />
<a name="1">1.</a> The performance difference between Junction and
Superpositions are due to implementation details rather than feature set e.g;
Junction uses short-circuiting; internally Superpositions is object oriented,
uses multimethods and an occasional eval.
<p>
<a name="2">2.</a> Activestate 813 on XP.

<h1>See Also</h1>
For more generic set operations see
<a href="http://search.cpan.org/search?module=Set::Array">Set::Array</a>,
<a href="http://search.cpan.org/search?module=Set::Bag">Set::Bag</a>,
<a href="http://search.cpan.org/search?module=Set::IntRange">Set::IntRange</a>,
<a href="http://search.cpan.org/search?module=Set::IntSpan">Set::IntSpan</a>,
<a href="http://search.cpan.org/search?module=Set::Scalar">Set::Scalar</a>
</body></html>
